# Electromagnetic-Bioreactor

The electromagnet enclosure was designed to be a safe and non-invasive method of modulating cellular substrate stiffness to induce biomimetic mechanical stimulation to matured and differentiating cardiomyocytes. This bioreactor is complimentary to the iron nanoparticle infused hydrogels developed in previously published works (1). Each of the electromagnets (APW Company, EM137-24-222) has a holding capacity of 20kg when 24V 0.2Amps is applied. The displacement of nanoparticles within the hydrogels is accomplished by modulation of the electromagnetic fields from 0 to 100% field strength, and the nature of an electronically controlled magnetic system provides precision application of the electromagnetic field. This enables tuning of differences observed in contraction profiles between immature and mature or healthy and diseased cardiomyocytes to be applied to the substrate of cells in culture that could potentially influence preconditioning or chamber specification of differentiating stem cell derived cardiomyocytes.


Physical design of the electromagnetic bioreactor
The layout of the electrical components for this bioreactor are displayed in the attached images. The key components of the system are the Digilent Analog Discovery 2 (Digilent, 410-321) and the OPA541 operational amplifier power module. The Digilent Analog Discovery 2 is a USB controlled oscilloscope, logic analyser, and variable power supply. It can be used straight out the box without modification and is controlled via computer software UI called Waveforms. The OPA541 operational amplifier power module is a commercial plastic control board (PCB) that can be purchased from several vendors including Amazon AU. It is designed to reliably amplify complex audio signals through a two phased amplification with an OPA445 followed by a larger OPA541. This design makes it uniquely capable for our application of amplifying complex contraction profiles but requires modifications to improve its reliability and total gain (modifications described in the attached images). Initially the OPA445 (Digi-Key, OPA445AU-ND) and OPA541 (Digi-Key, OPA541AP-ND) that are provided on the purchased power module are low quality and are replaced with better versions of these components from Texas Instruments. Secondly the gain amplification on the power module board is insufficient so 4 SMD resistors are exchanged for different resistance to control a gain amplification of 2 over the OPA445 and a gain amplification of 5 over the OPA541 which provides a total gain amplification of 10 (2x5). Finally, the incoming voltage to the power module board to drive the electromagnets is close to the operational threshold of the input capacitors. It is therefore wise to increase the capacitors operating voltage from 50V to 63V (Digi-Key, P123408-ND) to accommodate the electrical load. The Digilent Analog Discovery 2 and OPA541 operational amplifier power module components together can produce a customised wavefunction that represents the contraction profile of cardiomyocytes, and the amplification of that signal to drive 6 independent electromagnets. Each of the electromagnets (APW Company, EM137-24-222) has a holding capacity of 20kg when 24V 0.2Amps is applied. The operating temperature of the OPA541 operational amplifier power module can reach temperatures exceeding 100oC and thus required the design of a temperature-controlled air-cooling system (displayed in appendix 6). The air-cooling system uses a negative temperature coefficient (NTC) 10K Ohm thermistor (Jaycar, RN3440) that increases fan speed sequentially as temperature increases. The NTC works at a maximum resistance of 10K Ohms when its temperature is at 25oC and its resistance goes down as it gets hotter. The microcontroller used to operate the thermistor and fan speed is an Arduino mega 2560 Rev3 (Arduino, A000067). This type of microcontroller requires customised control software to be uploaded onto it which was created and uploaded using the Arduino IDE 2.0.0. The Arduino provides a 5V power output and reads the returning voltage on pin A0 over a voltage divider network using the 10K Ohm thermistor and a static 10K Ohm resistor. The equation we use to find the output voltage is described in the equation below 

V_out=  R_2/(R_1+R_2 )   x  V_in

Where V_out is the voltage read on Pin A0 of the Arduino microcontroller, R_2 is the static 10K Ohm resistor, R_1 is the NTC thermistor, and V_in is the 5V output voltage from the Arduino microcontroller that’s passed through the voltage divider network. As the temperature of the NTC thermistor increases its resistance decreases and an increased voltage is returned to the Arduino mega. The fan we are using is a 2 wire 24v brushless DC motor fan (Jaycar, X2542). The Arduino isn’t powerful enough to control the fan speed, so we modulate the amount of voltage the fan receives with a 2N7000 N-Channel field effect transistor (JayCar, ZT2400). The electrical schematic for this system is provided in the attached images.
The electromagnets themselves can exceed temperatures of 42oC which would create a hostile environment for cell culture growth and thus we engineered a water-cooling system for the electromagnets. This works using a water-cooling system designed for a home desktop computer and is modified to incorporate our own design of water flow valve and copper coils used for cooling the 540/550 brush motors of RC boats. The water-cooling systems schematic is shown in the attached images and all parts used in the construction of the electromagnetic bioreactor are listed in the parts list.

Operation of the electromagnetic bioreactor
The operation of the electromagnets is operated via the Waveforms software that controls the Digilent Analog Discovery 2. Upon opening he software we select program 4 with Scope of 2x215, Wavegen of 2x256, logic of 16x16, and pattern of 16x16. Selecting this program allows more of the distributed voltage inside the Digilent Analog Discovery 2 to be supplied to the wavegen function as this is what we will use most heavily. Using the protocol panel on the left of the welcome screen we select scope, wavegen, and supplies. In the supplies tab we set both the positive and negative voltage to 5V which provides the Arduino mega 2560 with 5V and 200 mA. This power supply allows the Arduino to run the thermistor regulated cooling fan next to the OPA541 operational amplifier. On the scope panel we set the base time to 2s/division and set the range for both scope channels to 5V. This provides a scope field from +25 to -25V that’s 20seconds long. Consulting the electromagnetic bioreactor schematic in Appendix 6 you can see channel 1 of the scope is connected to the output wavegen before it enters the OPA541 power module and channel 2 is connected to the output of the OPA541 power module. These settings allow for the visualisation of the wave function both before and after it’s been amplified and helps determine the efficiency of the OPA541 power module. In the wavegen tab we control the wave function that’s been generated by the Digilent Analog Discovery 2 that will be delivered to the electromagnets to manipulate the cells substrate. For testing we used a sine wave with a 1Hz frequency, an amplitude of 2.4V and offset of 0V, a symmetry of 50% and a phase of 0o. These settings are controlled from the “simple” panel in the wavegen tab. By switching to the “custom” panel in the wavegen tab we are presented with a panel with a multitude of options for designing a waveform. By selecting “File” we can upload a file that’s been normalized from 0 to 100% for the contraction profile of cardiomyocytes we have previously measured in the lab. Once the file has been uploaded, the contraction profile is present in the wavegen graph. We now click on run in the wavegen, scope, and supplies tabs and turn on the two bench power supplies supplying the input voltage to the OPA541 power module. We can now see in the scope window that the 2.4V sign wave being produced from the wavegen tab is displaying as two sign waves on the scope tab. The initial wavegen with an amplitude of 2.4V from channel 1 and a second wavegen with an amplitude of 24v from channel 2. We can then save these settings so we don’t need to reconfigure the waveforms software every time we run an experiment and we can run these wavegen programs continuously. 


Reference

1. Islam MS, Molley TG, Ireland J, Kruzic JJ, Kilian KA. Magnetic Nanocomposite Hydrogels for Directing Myofibroblast Activity in Adipose‐Derived Stem Cells. Adv NanoBio Res. 2021 Apr;1(4):2000072.
